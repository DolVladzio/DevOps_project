{
	"project": {
	"name": "my-infra",
	"environment": "dev",
	"vm_hostname": "ubuntu",
	"terraform_username": "terraform-user",
	"bucket_state_name": "state-bucket-name-1377",
	"repo_name": "test-artifact-registry",

	"db-username": "schedule_user",
	"db-pass": "MyPassword1234!",

	"location_azurerm": "northeurope",
	"resource_group_name_azurerm": "resource-group",
	"key_vault_name_azurerm": "DB-secrets-new-43354",
	"storage_account_name_azurerm": "terraformuser",

	"keys":[
		"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC6A0w41fHziWMbn3xFLKtKxBhLuOTzqIwda9bm0MDZMbn3Hr7luk5v5tiAt0l4fGNJXjc4Rje3Tcwl3/3/xsJL3ifdfDRlAFsnQojgbTn0e0jHCfOg0/c3bY3UZ463d5blD+ALKiD5QxlDBKlgrDs+PjRmZbHvX+o0MUtXRq98RD4OqZwWFwreQBe+ARfMy/6tJQ8aTPLyv5pJvgYsjLPXvOw+xTz2hDCW3+O+Vv3hssp5PkIDoLD+MxgIhRNvYy2VFjekVg1oQg4eLIc6r6kJ0PuJMw8wvspuFae/RaHbHGsF1g03wQAZV6R02Wg+lWMSebruwNGP1gVb2IJAi/JaA8jdhimM1zEQLEKEoDkAsNSwudE2+erUviDqgtLfU238tcQ02n/kPkAsTDpl1gdt+OWABTL36MGgRu4WaLoYu+hFcPd+oIag+PSfUb0VKIqYSS51q7eODituC0cb3aBjAWEcozdRC4wmpG9+0rEdnYS+ySSpk8YVgYkORM1mt1FdQh9GyF3uV/7/74Lw1BQ9FRPABTureFjPX4iftPFDGst48TC0jY65LHgSv2TWRkB//3pBslpUnbGAzDMjFV1DhGjKzwxt+fYrYO+7avMgOVEiP/H2jIvOTuhQ8gFOKffIVcX8hDOkpQvo9JmjYzfF+fqqEZ8A4n/CaZOZQH2C+Q== mari-pc@MARI-PC",
		"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDYLUdSPOk00sjUNjHi53n0y6jnJndZS6GN6JbpKmaQRaBLZn8dHJf+vm1HedDiEf7zZL1gy9ILm6mISC5+wWFS4noxfd6p8Z15Ccsp0I2Z3eTVSceBHRhXSzIUo0YkILtIsW3TS6/IjJtAxKa8xc2aOLLiMIkkhVYZHlkYVGMY+8rgHKrjeipFHE6EgP0NF08NHZrvBjSv8CQneuT/C0G2Yz5f/Z83htFJ3ZfnYt8Yapc3hPVUbyzQ3xY3vW2tTp1X5voT2PkhcCGoVUgwH5sU3zcwruy760zKATHiZMzlKULRoCFGYH0CPWEpPOmEElAJCPyZNBUjbqyBHhsmsAsN peachka@anastasiias-MacBook-Pro.local",
		"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC1Y3jykJs6hKYDRJdAemfkB4L8Zn7xoHjJODV750K4L7gIl2BT/xpUi4u7Ekww7UJIysFIabUR/e3w45a3oA3dZTYkQyyW3CbMLqc0U9dJDTHIXqrSSm+/hPiycP3i9JlezgqzKcTOetb5BEqRGf8jIYhi2VDnz+KMlnXt8UDms5WdMP+QFLHbrh1uTq31nCUT84jKwXBs/ar9Rxzs9keSEYPkZE0aSpegp7XQsVSHMjCVylAm8TIUR6CMYaB10zKLJM99snPGdx9iokJESR8g9xBQMhRvVYxONR28ZWDfPYiO8zKwGSkibQ2L4IkgRZsghenD57wPIPWmTtHoSaA/JHLWR4a8FZBqY6FPysv2XNSwyxiHFaR8T7Zpj8kt9lUwEtityBWpC/2EXLJ3lGzIAVgyz/Yq0qD80x1ODvt/4MQgv235qxDXq0Y5AXIAIphjlENKh78YkM61OQ6LnIH7oisY+VJTz9jhHhL7y6hERF/J8rxPOMMZCTqJGW9Daq41zCqdNZ4ehG/+hgibh092jWMcxWGVbcJHp1bmFHu5tBaviuKVCLw2/0DlX9JC31+rTcUT2HDAqMmp+Ii3yXsZboGJ4Is2Er5qUArsHvo+LSmE8zw8yMpaSEv2V8ndRDwtolbHiKoxN1LFSffu0LYrbjzPIdZU3ua8glUti03yTQ== nikita@kali"
	]
	},

	"network": [
	{
		"name": "main",
		"vpc_cidr": "10.0.0.0/16",
		"subnets": [
		{
			"name": "public-subnet",
			"cidr": "10.0.1.0/24",
			"public": true,
			"zone": "a"
		},
		{
			"name": "private-subnet",
			"cidr": "10.0.2.0/24",
			"public": false,
			"zone": "b"
		},
		{
			"name": "private-subnet-2",
			"cidr": "10.0.3.0/24",
			"public": false,
			"zone": "a"
		}
		]
	}
	],

	"artifact_registry":[
	{
		"enabled": true,
		"provider": "azurerm",
		"name": "artifactRegistry",
		"region": "northeurope",
		"repository_type": "docker",
		"format": "DOCKER",
		"auth_required": true,
		"sku": "Standard",
		"public_network_access_enabled": true,
		"retention_policy": {
		"days": 30,
		"enabled": true
		},
		"trust_policy": {
		"enabled": false
		}
	}
	],

	"vm_instances": [
	{
		"name": "k3s-master-1",
		"zone": "1",
		"tags": ["k3s", "master"],
		"public_ip": true,
		"security_groups": ["k3s-sg"],
		"allocation_method": "Dynamic",
		"ip_configuration_name": "internal",
		"private_ip_address_allocation": "Dynamic",
		"size": "small"
	},
	{
		"name": "k3s-master-2",
		"zone": "2",
		"tags": ["k3s", "master"],
		"public_ip": false,
		"security_groups": ["k3s-sg"],
		"allocation_method": "Dynamic",
		"ip_configuration_name": "internal",
		"private_ip_address_allocation": "Dynamic",
		"size": "small"
	},
	{
		"name": "k3s-master-3",
		"zone": "3",
		"tags": ["k3s", "master"],
		"public_ip": false,
		"security_groups": ["k3s-sg"],
		"allocation_method": "Dynamic",
		"ip_configuration_name": "internal",
		"private_ip_address_allocation": "Dynamic",
		"size": "small"
	}
	],

	"vm_instances_size_map": {
	"northeurope": {
		"small": "Standard_DC1ds_v3",
		"medium": "Standard_DC2ds_v3",
		"large": "Standard_DC4ds_v3"
	},
	"westeurope": {
		"small": "Standard_DS1_v2",
		"medium": "Standard_DS2_v2",
		"large": "Standard_DS3_v2"
	},
	"eastus": {
		"small": "Standard_B1s",
		"medium": "Standard_B2s",
		"large": "Standard_B4ms"
	}
	},

	"os_disk": {
	"small": {
		"caching": "ReadWrite",
		"storage_account_type": "Standard_LRS"
	},
	"medium": {
		"caching": "ReadOnly",
		"storage_account_type": "Premium_LRS"
	},
	"large": {
		"caching": "None",
		"storage_account_type": "UltraSSD_LRS"
	}
	},

	"os_image": {
	"northeurope": {
		"publisher": "Canonical",
		"offer": "0001-com-ubuntu-server-jammy",
		"sku": "22_04-lts-gen2",
		"version": "latest"
	},
	"westeurope": {
		"publisher": "RedHat",
		"offer": "RHEL",
		"sku": "8_6-gen2",
		"version": "latest"
	},
	"eastus": {
		"publisher": "MicrosoftWindowsServer",
		"offer": "WindowsServer",
		"sku": "2022-datacenter-smalldisk",
		"version": "latest"
	}
	},

	"load_balancer": {
	"name": "k3s-lb",
	"type": "public",
	"frontend_port": 6443,
	"backend_port": 6443,
	"backend_pool": ["k3s-master-1", "k3s-master-2", "k3s-master-3"],
	"probe_port": 6443,
	"protocol": "tcp"
	},

	"networks": [
	{ "name": "public", "cidr": "0.0.0.0/0" },
	{ "name": "internal", "cidr": "10.0.0.0/16" }
	],

	"security_groups": [
	{
		"name": "k3s-sg",
		"vpc": "main",
		"attach_to": ["k3s-master-1", "k3s-master-2", "k3s-master-3"],
		"description": "Allow traffic from LB and cluster nodes",
		"ingress": [
		{ "protocol": "tcp", "port": 6443, "source": "k3s-lb" },
		{ "protocol": "tcp", "port": 9345, "source": "internal" },
		{ "protocol": "tcp", "port": 22, "source": "public" }
		],
		"egress": [
		{ "protocol": "tcp", "port": 5432, "destination": "db-sg" },
		{ "protocol": "tcp", "port": 80, "destination": "public" },
		{ "protocol": "tcp", "port": 443, "destination": "public" }
		]
	},
	{
		"name": "db-sg",
		"vpc": "main",
		"attach_to": ["maindb"],
		"description": "Allow only cluster backend to DB",
		"ingress": [
		{ "protocol": "tcp", "port": 5432, "source": "k3s-sg" }
		],
		"egress": [
		{ "protocol": "tcp", "port": 80, "destination": "public" },
		{ "protocol": "tcp", "port": 443, "destination": "public" }
		]
	}
	],

	"databases": [
	{
		"name": "maindb",
		"network": "main",
		"type": "postgres",
		"version": "14",
		"size": "small",
		"zone": ["a", "b"],
		"azure_zone": 1,
		"sku_name": "B_Standard_B1ms",
		"location": "northeurope",
		"subnets": ["private-subnet", "private-subnet-2"],
		"port": 5432,
		"security_groups": ["db-sg"],
		"allow_public_access": true,
		"start_ip_address": "0.0.0.0",
		"end_ip_address": "255.255.255.255"
	}
	],

	"containers": {
	"backend": {
		"name": "class_schedule_backend",
		"image": "class_schedule_backend",
		"tag": "latest",
		"ports": ["8080:8080"],
		"env": [
		"DB_HOST",
		"DB_USER",
		"DB_PASSWORD",
		"DB_PORT",
		"DB_NAME",
		"REDIS_HOST",
		"REDIS_PORT"
		]
	},
	"frontend": {
		"name": "class_schedule_frontend",
		"image": "class_schedule_frontend",
		"tag": "latest",
		"ports": ["3000:3000"]
	},
	"redis": {
		"name": "class_schedule_cache",
		"image": "redis",
		"tag": "latest",
		"ports": ["6379:6379"]
	}
	}
}