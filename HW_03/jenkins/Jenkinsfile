pipeline {
    agent any

    environment {
        // Frontend
        FRONTEND_DOCKER_IMAGE_NAME = "frontend"
        FRONTEND_DOCKERFILE_SOURCE = "HW_03/project/frontend/"
        // Backend
        BACKEND_DOCKER_IMAGE_NAME = "backend"
        BACKEND_DOCKERFILE_SOURCE = "HW_03/project/"
    }

    stages {
        stage('SonarQube testing') {
            steps {
                script {
                    dir("${BACKEND_DOCKERFILE_SOURCE}") {
                        sh "gradle sonarqube"
                    }
                }
            }
        }
        // stage('Building images') {
        //     steps {
        //         script {
        //             // buildImageStage(FRONTEND_DOCKER_IMAGE_NAME, FRONTEND_DOCKERFILE_SOURCE)
        //             buildImageStage(BACKEND_DOCKER_IMAGE_NAME, BACKEND_DOCKERFILE_SOURCE)
        //         }
        //     }
        // }
    }
}

Function definition within the Jenkinsfile
def buildImageStage(String dockerImageName, String dockerfileSource) {
    stage("Building ${dockerImageName}") {
        dir("${dockerfileSource}") {
            echo "- Building the docker image: ${dockerImageName}..."
            sh "docker build -t ${dockerImageName} ."
            echo "- The docker image: ${dockerImageName} was built successfully"
        }
    }
}